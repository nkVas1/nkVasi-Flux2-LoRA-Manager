# üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï v1.2.1 - Windows WinError 2 FIX

**–ü—Ä–æ–±–ª–µ–º–∞**: `[WinError 2] –ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –æ–±—É—á–µ–Ω–∏—è –Ω–∞ Windows

**–ü—Ä–∏—á–∏–Ω–∞**: `shlex.split()` –ª–æ–º–∞–µ—Ç –ø—É—Ç–∏ Windows —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ —Å–ª–µ—à–∞–º–∏ (backslashes)

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ JSON –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏

---

## üîç –ß–¢–û –ë–´–õ–û –ù–ï –¢–ê–ö (v1.2)

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –≤ v1.2:
```
Config Node (Python)
    ‚Üì (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É)
    return ("python.exe -u -m accelerate ... G:\\ComfyUI\\...", ...)
    ‚Üì
Runner Node (Python)
    ‚Üì (–ø–∞—Ä—Å–∏—Ç —Å—Ç—Ä–æ–∫—É —á–µ—Ä–µ–∑ shlex.split)
    cmd_list = shlex.split("python.exe -u -m accelerate ... G:\\ComfyUI\\...")
    ‚Üì (shlex –ª–æ–º–∞–µ—Ç backslashes!)
    ["python.exe", "-u", "-m", "accelerate", ..., "G", ":\\ComfyUI\\..."]
    ‚Üì –û–®–ò–ë–ö–ê!
    subprocess.Popen() –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ python.exe —Å –ø–æ–ª–æ–º–∞–Ω–Ω—ã–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
    ‚Üì
    WinError 2: –ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
```

### –ü–æ—á–µ–º—É shlex.split() –ª–æ–º–∞–µ—Ç –ø—É—Ç–∏?
```python
>>> import shlex
>>> shlex.split('python.exe -u -m accelerate G:\\ComfyUI\\dataset')
# –ù–∞ Windows —ç—Ç–æ –º–æ–∂–µ—Ç –¥–∞—Ç—å:
['python.exe', '-u', '-m', 'accelerate', 'G', ':\\ComfyUI\\dataset']
# –ò–õ–ò –æ—Å—Ç–∞–≤–∏—Ç—å backslashes –∫–∞–∫ escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

---

## ‚úÖ –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨ (v1.2.1)

### –ù–æ–≤—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:

```
Config Node (Python)
    ‚Üì (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON)
    return ('["python.exe", "-u", "-m", "accelerate", ..., "G:\\\\ComfyUI\\\\..."]', ...)
    ‚Üì
Runner Node (Python)
    ‚Üì (–ø–∞—Ä—Å–∏—Ç JSON)
    cmd_list = json.loads('["python.exe", "-u", "-m", "accelerate", ...]')
    ‚Üì (JSON —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç backslashes!)
    ["python.exe", "-u", "-m", "accelerate", ..., "G:\\ComfyUI\\..."]
    ‚Üì ‚úÖ –†–ê–ë–û–¢–ê–ï–¢!
    subprocess.Popen() –ø–æ–ª—É—á–∞–µ—Ç —á–∏—Å—Ç—ã–π —Å–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π
    ‚Üì
    –û–±—É—á–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
```

---

## üìù –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ö–û–î–ï

### `src/config_gen.py` (–º–µ—Ç–æ–¥ generate_config)

#### –î–û (v1.2):
```python
cmd = [...]  # –°–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
return (" ".join(cmd), ...)  # ‚ùå –ü–õ–û–•–û: –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫—É
```

#### –ü–û–°–õ–ï (v1.2.1):
```python
# –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–æ–≤
if not os.path.exists(script_path):
    return (f"ERROR: Script not found at: {script_path}", "", "")

if not os.path.exists(python_exe):
    return (f"ERROR: Python interpreter not found at: {python_exe}", "", "")

cmd = [...]  # –°–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
cmd_json = json.dumps(cmd, ensure_ascii=False)  # ‚úÖ –•–û–†–û–®–û: JSON-—Å–ø–∏—Å–æ–∫
return (cmd_json, ...)
```

### `src/process.py` (–º–µ—Ç–æ–¥ run_training –≤ Flux2_Runner)

#### –î–û (v1.2):
```python
cmd_list = shlex.split(cmd_args)  # ‚ùå –ü–õ–û–•–û: –õ–æ–º–∞–µ—Ç –ø—É—Ç–∏ –Ω–∞ Windows
```

#### –ü–û–°–õ–ï (v1.2.1):
```python
try:
    # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º JSON (–Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)
    cmd_list = json.loads(cmd_args)
    if not isinstance(cmd_list, list):
        raise ValueError("JSON is not a list")
except (json.JSONDecodeError, ValueError):
    # –ï—Å–ª–∏ –Ω–µ –≤—ã—à–ª–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (compatibility)
    print("[FLUX-TRAIN] Warning: Using legacy string parsing")
    cmd_list = shlex.split(cmd_args)
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–û—á–∏—Å—Ç–∏—Ç–µ ComfyUI –∫—ç—à:**
   ```
   Ctrl + F5  (Windows/Linux)
   Cmd + Shift + R  (Mac)
   ```

2. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ ComfyUI**

3. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π workflow:**
   - –ù–æ–¥–µ Config
   - –ù–æ–¥–µ Runner (trigger=True)

4. **–ù–∞–∂–º–∏—Ç–µ Run**

5. **–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
   - üü¢ **–ó–µ–ª–µ–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**: "Training Started!" ‚Üí ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
   - üî¥ **–ö—Ä–∞—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**: "ERROR: Script not found" ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å sd_scripts_path
   - üî¥ **–ö—Ä–∞—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**: "ERROR: Python interpreter not found" ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ —Å ComfyUI –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º

---

## üêõ –ï–°–õ–ò –í–°–ï –ï–©–Å –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ `[FLUX Monitor]`
   - –ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç ‚Üí –æ—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à (Ctrl+F5)

2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —á–µ—Ä–Ω–æ–µ –æ–∫–Ω–æ ComfyUI (—Ç–µ—Ä–º–∏–Ω–∞–ª)**
   - –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è `[FLUX-TRAIN]`
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `ERROR: ...` ‚Üí –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –æ—à–∏–±–∫—É

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –≤—Ä—É—á–Ω—É—é –≤ PowerShell:**
   ```powershell
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ python.exe
   python -c "import sys; print(sys.executable)"
   # –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: C:\ComfyUI\...\python.exe (–∏–ª–∏ –ø–æ—Ö–æ–∂–µ–µ)
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫—Ä–∏–ø—Ç
   Test-Path "G:\ComfyUI\...\sd-scripts\flux_train_network.py"
   # –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: True
   ```

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –í–ï–†–°–ò–ô

| –ü–∞—Ä–∞–º–µ—Ç—Ä | v1.2 | v1.2.1 |
|----------|------|--------|
| **–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã** | –°—Ç—Ä–æ–∫–∞ | JSON —Å–ø–∏—Å–æ–∫ |
| **Windows –ø—É—Ç–∏** | ‚ùå –õ–æ–º–∞—é—Ç—Å—è | ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è |
| **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤** | –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |
| **Backward compatible** | - | ‚úÖ –î–∞ |
| **–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |

---

## üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ v1.2:

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
   - `src/config_gen.py`
   - `src/process.py`

2. **–ò–ª–∏ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∑–∞–Ω–æ–≤–æ:**
   ```bash
   git pull origin main
   ```

3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ ComfyUI**

4. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+F5)**

---

## ‚ú® –ß–¢–û –ü–û–õ–£–ß–ò–õ–û–°–¨

- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ WinError 2** –Ω–∞ Windows
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤** –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- ‚úÖ **–õ—É—á—à–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** (—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å—Ç–∞—Ä—ã–π, –∏ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –ø—É—Ç–µ–π** —á–µ—Ä–µ–∑ JSON

---

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

–¢–µ–ø–µ—Ä—å –Ω–∞ Windows:
```
‚úÖ python.exe –Ω–∞—Ö–æ–¥–∏—Ç—Å—è
‚úÖ –ü—É—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ subprocess.Popen() —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å
‚úÖ –û–±—É—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è!
‚úÖ –õ–æ–≥–∏ —Å—Ç—Ä–∏–º—è—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä
```

**–í–µ—Ä—Å–∏—è v1.2.1 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É Windows!**

---

**–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ —Ç–µ—Ä–ø–µ–Ω–∏–µ!** üôè

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ì–æ—Ç–æ–≤–æ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ GitHub.
