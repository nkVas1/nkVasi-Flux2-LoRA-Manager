# v1.5.0 - Embedded Python Support via pip install --target (2025-01)

## ๐ฏ ะะปะฐะฒะฝะพะต ัะปัััะตะฝะธะต

ะะตะฐะปะธะทะพะฒะฐะฝะฐ ะฟะพะดะดะตัะถะบะฐ **ะฒัััะพะตะฝะฝะพะณะพ (embedded) Python** ะฑะตะท ะผะพะดัะปั `venv`. ะกะธััะตะผะฐ ัะตะฟะตัั ะธัะฟะพะปัะทัะตั `pip install --target training_libs/` ะฒะผะตััะพ ัะพะทะดะฐะฝะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั, ะพะฑะตัะฟะตัะธะฒะฐั ะฟะพะปะฝัั ัะพะฒะผะตััะธะผะพััั ั ะฟะพััะฐัะธะฒะฝัะผะธ ะธะฝััะฐะปะปััะธัะผะธ Python.

## โจ ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

### ๐ฆ ะะพะปะฝะพัััั ะฟะตัะตะฟะธัะฐะฝ ะผะพะดัะปั

**`src/venv_manager.py`** (400+ ัััะพะบ)
- **`StandalonePackageManager`**: ะกะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ะฟะฐะบะตัะฐะผะธ ัะตัะตะท `--target` ะดะธัะตะบัะพัะธั
  - ะะฐะฑะพัะฐะตั ั ะปัะฑัะผ Python (ะฒัััะพะตะฝะฝัะผ, ะฟะพััะฐัะธะฒะฝัะผ, ะพะฑััะฝัะผ)
  - ะะต ััะตะฑัะตั ะผะพะดัะปั `venv`
  - ะกะพะทะดะฐะตั ะธะทะพะปะธัะพะฒะฐะฝะฝัั ะฟะฐะฟะบั `training_libs/`
  - ะะฒัะพะผะฐัะธัะตัะบะฐั ะฒะตัะธัะธะบะฐัะธั ัััะฐะฝะพะฒะบะธ
  - ะะพะปะฝะฐั ะฟะพะดะดะตัะถะบะฐ ะฟะตัะตัััะฐะฝะพะฒะบะธ ัะตัะตะท `--force`

- **`ensure_training_packages()`**: ะคัะฝะบัะธั ะฐะฒัะพะธะฝะธัะธะฐะปะธะทะฐัะธะธ ะฟะฐะบะตัะพะฒ
  - ะัะพะฒะตััะตั ะฝะฐะปะธัะธะต training_libs/
  - ะกะพะทะดะฐะตั ะธ ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะตัะปะธ ะฝัะถะฝะพ
  - ะะพะทะฒัะฐัะฐะตั ััะฐััั ะธ ะฟััั

### ๐ง ะะฑะฝะพะฒะปะตะฝั ัััะตััะฒัััะธะต ัะฐะนะปั

**`src/process.py`**
- ะะฑะฝะพะฒะปะตะฝั ะธะผะฟะพััั: `VirtualEnvManager` โ `StandalonePackageManager`
- ะะฝัะตะณัะฐัะธั `ensure_training_packages()` ะฒะผะตััะพ `ensure_training_venv()`
- ะัะฟะพะปัะทะพะฒะฐะฝะธะต `PYTHONPATH` ะผะพะดะธัะธะบะฐัะธะธ ะฒะผะตััะพ ะทะฐะผะตะฝั python executable
- ะฃะปัััะตะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ั graceful fallback

**`setup_training_env.py`**
- ะะตัะตะฟะธัะฐะฝ ะดะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั `pip install --target`
- ะะพะดะดะตัะถะบะฐ ะฒัััะพะตะฝะฝะพะณะพ Python
- ะัะพะณัะตัั-ะฒัะฒะพะด ั ะธะฝะดะธะบะฐัะพัะฐะผะธ ัััะฐะฝะพะฒะบะธ
- ะะฑะฝะพะฒะปะตะฝะฝัะต ัะพะพะฑัะตะฝะธั ะพะฑ ะพัะธะฑะบะฐั

**`README.md`**
- ะะฑะฝะพะฒะปะตะฝะฐ Quick Setup ะธะฝััััะบัะธั
- ะะพะฒะฐั Manual Setup ะดะปั --target ัััะฐะฝะพะฒะบะธ
- ะะพะฑะฐะฒะปะตะฝะฐ ะทะฐะผะตัะบะฐ ะพ ะฒัััะพะตะฝะฝะพะผ Python

**`TROUBLESHOOTING.md`**
- ะะพะฑะฐะฒะปะตะฝ ัะฐะทะดะตะป "No module named 'venv'"
- ะะฑัััะฝะตะฝะธะต ัะฐะฑะพัั --target ัััะฐะฝะพะฒะบะธ
- ะะฑะฝะพะฒะปะตะฝะฝัะต ะบะพะดั ะฒะตัะธัะธะบะฐัะธะธ

## ๐ก๏ธ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั ะฒ v1.5.0

```
Training node trigger
    โ
Pre-flight environment check
    โ
ensure_training_packages(plugin_dir)
    โโ Check if training_libs/ exists
    โโ Create directory if missing
    โโ Run: pip install --target training_libs/
    โโ Verify critical packages
    โ
Modify PYTHONPATH environment variable
    โโ Insert training_libs/ path at the beginning
    โโ Preserve original PYTHONPATH
    โโ Pass to subprocess
    โ
Start training subprocess with modified env
    โโ PYTHONPATH=/path/to/training_libs:/original/path
    โโ Python finds torch, transformers, diffusers in training_libs/
    โโ No version conflicts with ComfyUI
```

## ๐ ะกัะฐะฒะฝะตะฝะธะต v1.4 โ v1.5.0

| ะัะฟะตะบั | v1.4 | v1.5.0 |
|--------|------|--------|
| **ะะตัะพะด ะธะทะพะปััะธะธ** | `python -m venv` | `pip install --target` |
| **ะะฐะฟะบะฐ ะทะฐะฒะธัะธะผะพััะตะน** | `training_venv/` | `training_libs/` |
| **ะะฐะฑะพัะฐะตั ั embedded Python** | โ ะะตั (ะฝะตั venv ะผะพะดัะปั) | โ ะะฐ |
| **ะะฐะฑะพัะฐะตั ั ะฟะพะปะฝัะผ Python** | โ ะะฐ | โ ะะฐ |
| **ะะฐะทะผะตั ะฒััะพะดะฝะพะณะพ ัะฐะนะปะฐ** | ~2GB | ~2GB (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน) |
| **ะัะตะผั ัััะฐะฝะพะฒะบะธ** | 5-10 ะผะธะฝ | 5-10 ะผะธะฝ (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน) |
| **ะกะพะฒะผะตััะธะผะพััั ั Windows** | โ ะะฐ | โ ะะฐ (ะปัััะต) |
| **ะกะพะฒะผะตััะธะผะพััั ั ะฟะพััะฐัะธะฒะฝัะผะธ Python** | โ ะะตั | โ ะะฐ |

## ๐ ะะธะณัะฐัะธั ั v1.4 ะฝะฐ v1.5.0

### ะะฒัะพะผะฐัะธัะตัะบะฐั ะผะธะณัะฐัะธั
1. ะัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต ะฑัะดะตั ัะพะทะดะฐะฝะฐ ะฟะฐะฟะบะฐ `training_libs/`
2. ะัะต ะฟะฐะบะตัั ะฟะตัะตัััะฐะฝะพะฒัััั (ะทะฐะฝะธะผะฐะตั 5-10 ะผะธะฝัั)
3. ะกัะฐัะฐั ะฟะฐะฟะบะฐ `training_venv/` ะฑะพะปััะต ะฝะต ะธัะฟะพะปัะทัะตััั

### ะััะฝะฐั ะฟะตัะตัััะฐะฝะพะฒะบะฐ (ะตัะปะธ ััะตะฑัะตััั)
```bash
# ะฃะดะฐะปะธัั ััะฐัะพะต ะพะบััะถะตะฝะธะต
rmdir /s training_venv  # Windows
rm -rf training_venv    # Linux/macOS

# ะะตัะตัััะฐะฝะพะฒะธัั ะฝะพะฒะพะต
python setup_training_env.py --force
```

## ๐ ะัะฟัะฐะฒะปะตะฝั

- โ "No module named 'venv'" ะพัะธะฑะบะฐ ะฝะฐ embedded Python
- โ "cannot import GenerationMixin" ัะตัะตะท ะฟัะฐะฒะธะปัะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต ะฒะตััะธัะผะธ
- โ ะะพะปะฝะฐั ัะพะฒะผะตััะธะผะพััั ั ะฟะพััะฐัะธะฒะฝัะผะธ ComfyUI ะธะฝััะฐะปะปััะธัะผะธ

## โ๏ธ Breaking Changes

- `training_venv/` โ `training_libs/` (ะฟะฐะฟะบะฐ ะฟะตัะตะธะผะตะฝะพะฒะฐะฝะฐ)
- `VirtualEnvManager` โ `StandalonePackageManager` (ะบะปะฐัั ะฟะตัะตะธะผะตะฝะพะฒะฐะฝ)
- `ensure_training_venv()` โ `ensure_training_packages()` (ััะฝะบัะธั ะฟะตัะตะธะผะตะฝะพะฒะฐะฝะฐ)

ะกัะฐััะน ะบะพะด ะฝะต ัะพะฒะผะตััะธะผ, ััะตะฑัะตััั ะพะฑะฝะพะฒะปะตะฝะธะต.

## ๐ ะัะธะผะตัะฐะฝะธั

ะัััะพะตะฝะฝะพะต Python (embedded Python) - ััะพ ะฟะพััะฐัะธะฒะฝะฐั ะธะฝััะฐะปะปััะธั Python ะฑะตะท ะผะพะดัะปั `venv`. ะงะฐััะพ ะธัะฟะพะปัะทัะตััั ะฒ:
- ะะพััะฐัะธะฒะฝะพะผ ComfyUI
- Standalone AI ะฟัะธะปะพะถะตะฝะธัั
- ะะณัะฐะฝะธัะตะฝะฝัั ะพะบััะถะตะฝะธัั (USB ัะปััะบะฐ, CI/CD)

v1.5.0 ะพะฑะตัะฟะตัะธะฒะฐะตั ะฟะพะปะฝัั ะฟะพะดะดะตัะถะบั ัะฐะบะธั ััะตะฝะฐัะธะตะฒ.

---

# v1.4.0 - Virtual Environment Manager for Dependency Isolation (2025-12-19)

## ๐ฏ ะะปะฐะฒะฝะพะต ัะปัััะตะฝะธะต

ะะตะฐะปะธะทะธัะพะฒะฐะฝะฐ **ัะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ะฒะธัััะฐะปัะฝัะผ ะพะบััะถะตะฝะธะตะผ (Virtual Environment Manager)**, ะบะพัะพัะฐั ะฟะพะปะฝะพัััั ะธะทะพะปะธััะตั ะทะฐะฒะธัะธะผะพััะธ ะพะฑััะตะฝะธั ะพั ComfyUI. ะฃัััะฐะฝัะตั ะฒัะต ะบะพะฝัะปะธะบัั ะฒะตััะธะน (GenerationMixin, transformers, diffusers ะธ ั.ะด.).

## โจ ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

### ๐ฆ ะะพะฒัะต ะผะพะดัะปะธ

1. **`src/venv_manager.py`** (380+ ัััะพะบ)
   - `VirtualEnvManager`: ะฃะฟัะฐะฒะปะตะฝะธะต ะธะทะพะปะธัะพะฒะฐะฝะฝัะผ Python ะพะบััะถะตะฝะธะตะผ
   - `ensure_training_venv()`: ะะฐัะฐะฝัะธััะตั ะฝะฐะปะธัะธะต ะณะพัะพะฒะพะณะพ venv
   - ะขะพัะฝัะต ะฒะตััะธะธ ะฟะฐะบะตัะพะฒ (transformers==4.36.2, diffusers==0.25.0, ะธ ั.ะด.)
   - ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะธ ะฒะตัะธัะธะบะฐัะธั
   - ะััะธัะพะฒะฐะฝะธะต ัะพััะพัะฝะธั ะพะบััะถะตะฝะธั

2. **`setup_training_env.py`** (74 ัััะพะบะธ)
   - Setup ัะบัะธะฟั ะดะปั ะธะฝะธัะธะฐะปะธะทะฐัะธะธ training venv
   - `--force` ัะปะฐะณ ะดะปั ะฟะตัะตัะพะทะดะฐะฝะธั
   - ะะฝัะตัะฐะบัะธะฒะฝะฐั ะฟัะพะฒะตัะบะฐ ัััะฐะฝะพะฒะบะธ
   - ะัะฐัะธะฒัะน ะฒัะฒะพะด ั ะธะฝะดะธะบะฐัะพัะฐะผะธ

### ๐ง ะฃะปัััะตะฝะธั ะฒ ัััะตััะฒัััะธั ัะฐะนะปะฐั

**`src/process.py`**
- ะะพะฑะฐะฒะปะตะฝ ะธะผะฟะพัั venv_manager
- ะะฝัะตะณัะธัะพะฒะฐะฝ ensure_training_venv() ะฒ start_training()
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟะตัะตะบะปััะตะฝะธะต ะฝะฐ Python ะธะท venv
- Fallback ะฝะฐ system Python ะตัะปะธ venv ะฝะต ะณะพัะพะฒ

**`README.md`**
- ะะพะปะฝะพัััั ะฟะตัะตะฟะธัะฐะฝะฐ Installation ัะตะบัะธั
- Quick Setup (ัะตะบะพะผะตะฝะดัะตััั): python setup_training_env.py
- Manual Setup ะดะปั ะฟัะพะดะฒะธะฝัััั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- Troubleshooting ะดะปั setup ะพัะธะฑะพะบ

**`TROUBLESHOOTING.md`**
- ะะพะฒัะน ัะฐะทะดะตะป: "GenerationMixin not found" ะธ ัะตัะตะฝะธะต
- ะะฑัััะฝะตะฝะธะต ะดะฒัั ะพะบััะถะตะฝะธะน (ComfyUI + Training)
- ะขะฐะฑะปะธัะฐ ะฒะตััะธะน ะฟะฐะบะตัะพะฒ ะฒ venv

## ๐ก๏ธ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

```
ComfyUI Node trigger
    โ
Pre-flight environment check
    โ
ensure_training_venv(plugin_dir)
    โข ะัะพะฒะตัะธัั ะฝะฐะปะธัะธะต training_venv/
    โข ะัะปะธ ะฝะตั โ create venv
    โข ะฃััะฐะฝะพะฒะธัั ะฟะฐะบะตัั ั ัะพัะฝัะผะธ ะฒะตััะธัะผะธ
    โข ะะตัะธัะธัะธัะพะฒะฐัั ะฒัะต ะธะผะฟะพััั
    โ
ะะฐะผะตะฝะธัั Python executable ะฝะฐ venv Python
    โ
subprocess.Popen ั training_venv Python
    โ
Training ะฒัะฟะพะปะฝัะตััั ะฒ ะะะะะะะะะะะะะ ะพะบััะถะตะฝะธะธ โ
```

## โ ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ

- โ **ะะพะปะฝะฐั ะธะทะพะปััะธั**: Training venv ะฟะพะปะฝะพัััั ะพัะดะตะปะตะฝ ะพั ComfyUI
- โ **ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต**: ะัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต ะธะปะธ if missing
- โ **ะัััััะต ะฟะพะฒัะพัะฝัะต ะทะฐะฟััะบะธ**: ะัะฟะพะปัะทัะตััั ะบััะธัะพะฒะฐะฝะฝัะน venv
- โ **ะขะพัะฝัะต ะฒะตััะธะธ**: ะัะต ะฟะฐะบะตัั ั ัะธะบัะธัะพะฒะฐะฝะฝัะผะธ ะฒะตััะธัะผะธ
- โ **ะะตัะธัะธะบะฐัะธั**: ะัะพะฒะตัะบะฐ ะฒัะตั ะฟะฐะบะตัะพะฒ ะฟะตัะตะด ััะตะฝะธัะพะฒะบะพะน
- โ **ะััะธัะพะฒะฐะฝะธะต**: ะะฝัะพัะผะฐัะธั ะพ ัะพััะพัะฝะธะธ ะฒ .venv_cache.json
- โ **Fallback ะผะตัะฐะฝะธะทะผ**: ะัะปะธ venv fails, ะธัะฟะพะปัะทัะตั system Python

## ๐ฆ ะะตััะธะธ ะฟะฐะบะตัะพะฒ ะฒ training_venv

| ะะฐะบะตั | ะะตััะธั | ะัะธัะธะฝะฐ |
|--------|--------|---------|
| torch | 2.1.0 | ะกัะฐะฑะธะปัะฝะฐั ะดะปั CUDA 12.1 |
| torchvision | 0.16.0 | ะกะพะฒะผะตััะธะผะฐ ั torch 2.1.0 |
| transformers | 4.36.2 | **ะะผะตะตั GenerationMixin** โ |
| diffusers | 0.25.0 | ะกะพะฒะผะตััะธะผะฐ ั transformers |
| accelerate | 0.25.0 | Multi-GPU training support |
| safetensors | 0.4.1 | ะะตะทะพะฟะฐัะฝะฐั ะทะฐะณััะทะบะฐ ะผะพะดะตะปะตะน |
| toml | 0.10.2 | Config ัะฐะนะปั |
| omegaconf | 2.3.0 | ะะพะฝัะธะณััะฐัะธั ะพะฑััะตะฝะธั |
| einops | 0.7.0 | Tensor operations |
| prodigyopt | 1.0 | Optimizer |
| lycoris-lora | 1.9.0 | LoRA implementation |

## ๐งช ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะตัะฒะพะฝะฐัะฐะปัะฝะฐั ัััะฐะฝะพะฒะบะฐ

```bash
cd ComfyUI-Flux2-LoRA-Manager
python setup_training_env.py
```

ะขะธะฟะธัะฝะพะต ะฒัะตะผั: 5-10 ะผะธะฝัั (ะทะฐะณััะถะฐะตััั ~2GB)

### ะะพะฒัะพัะฝะฐั ะฟัะพะฒะตัะบะฐ/ะฟะตัะตัััะฐะฝะพะฒะบะฐ

```bash
python setup_training_env.py --force
```

### ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั

```python
from src.venv_manager import VirtualEnvManager
manager = VirtualEnvManager()
all_ok, messages = manager.verify_installation()
for msg in messages:
    print(msg)
```

## ๐ ะัะปะธัะธะต ะพั v1.3.0

| ะัะฟะตะบั | v1.3.0 | v1.4.0 |
|--------|--------|--------|
| ะะตัะพะด ะทะฐัะธัั | Import hooks ะฑะปะพะบะธัััั triton/bitsandbytes | Virtual environment ะธะทะพะปะธััะตั ะฒัะต ะทะฐะฒะธัะธะผะพััะธ |
| ะะฑะปะฐััั ะดะตะนััะฒะธั | ะขะพะปัะบะพ problematic ะผะพะดัะปะธ | ะัะต 11 ะฟะฐะบะตัะพะฒ ะดะปั ะพะฑััะตะฝะธั |
| ะะตัะฐะตะผัะต ะฟัะพะฑะปะตะผั | Triton compilation ะพัะธะฑะบะธ | GenerationMixin + ะฒัะต ะฒะตััะธะพะฝะฝัะต ะบะพะฝัะปะธะบัั |
| ะะทะพะปััะธั | ะงะฐััะธัะฝะฐั (ะฑะปะพะบะธัะพะฒะบะฐ ะธะผะฟะพััะพะฒ) | **ะะพะปะฝะฐั (ะพัะดะตะปัะฝัะน Python)** |
| ะะฐะดะตะถะฝะพััั | ะัะตะฝั ัะพัะพัะฐั | **ะะฐะบัะธะผะฐะปัะฝะฐั** |

## ๐ ะกัะฐัะธััะธะบะฐ ะธะทะผะตะฝะตะฝะธะน

- **ะะพะฒัะต ัะฐะนะปั**: 2 (venv_manager.py, setup_training_env.py)
- **ะะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั**: 3 (process.py, README.md, TROUBLESHOOTING.md)
- **ะกััะพะบ ะดะพะฑะฐะฒะปะตะฝะพ**: ~700
- **ะกััะพะบ ัะดะฐะปะตะฝะพ**: 19
- **Net change**: +681 ัััะพะบ

---

# v1.3.0 - Enterprise-Grade Import Blocker System (2025-12-19)

## ๐ฏ ะะปะฐะฒะฝะพะต ัะปัััะตะฝะธะต

ะะตะฐะปะธะทะพะฒะฐะฝะฐ **ัะธััะตะผะฐ ะฟะตัะตัะฒะฐัะฐ ะธะผะฟะพััะพะฒ (Import Hook System)**, ะบะพัะพัะฐั ะฑะปะพะบะธััะตั ะฟัะพะฑะปะตะผะฝัะต ะผะพะดัะปะธ (`triton`, `bitsandbytes`) ะฝะฐ ััะพะฒะฝะต Python import machinery **ะะ ะธั ะฟะพะฟััะพะบ ัะบะพะผะฟะธะปะธัะพะฒะฐัั C-ัะฐััะธัะตะฝะธั**.

## โจ ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

### ๐ฆ ะะพะฒัะต ะผะพะดัะปะธ

1. **`src/import_blocker.py`** (280+ ัััะพะบ)
   - `ProblematicModuleBlocker`: Meta path finder/loader ะดะปั ะฟะตัะตัะฒะฐัะฐ ะธะผะฟะพััะพะฒ
   - `DiffusersQuantizerPatcher`: ะััะธั diffusers ะฟะตัะตะด ะธะผะฟะพััะพะผ
   - `install_import_blockers()`: ะะบัะธะฒะธััะตั ะทะฐัะธัั (ะดะพะฑะฐะฒะปัะตั hook ะฒ `sys.meta_path`)
   - `verify_blockers_active()`: ะัะพะฒะตััะตั, ััะพ ะฑะปะพะบะธัะพะฒะบะฐ ัะฐะฑะพัะฐะตั

2. **`src/environment_checker.py`** (145+ ัััะพะบ)
   - `EnvironmentChecker`: ะะธะฐะณะฝะพััะธะบะฐ ะพะบััะถะตะฝะธั (Python ะฒะตััะธั, GPU, ะฟะฐะบะตัั, ัะธะฟ ัััะฐะฝะพะฒะบะธ)
   - `run_full_check()`: ะะพะปะฝะฐั ะฟัะพะฒะตัะบะฐ ั ะฟะพะดัะพะฑะฝัะผะธ ัะพะพะฑัะตะฝะธัะผะธ
   - `print_environment_report()`: ะัะฐัะธะฒัะน ะฒัะฒะพะด ะดะปั ะดะธะฐะณะฝะพััะธะบะธ
   - ะัะตะดะฒะฐัะธัะตะปัะฝะฐั ะฟัะพะฒะตัะบะฐ ะฟะตัะตะด ััะฐััะพะผ ะพะฑััะตะฝะธั

3. **`test_import_blocker.py`** (72 ัััะพะบะธ)
   - ะขะตััะพะฒัะน ัะบัะธะฟั ะดะปั ะฟัะพะฒะตัะบะธ ัะธััะตะผั ะทะฐัะธัั
   - 4 ะพัะฝะพะฒะฝัั ัะตััะฐ: ัััะฐะฝะพะฒะบะฐ, ะฟัะพะฒะตัะบะฐ, ะฑะปะพะบะธัะพะฒะบะฐ ะธะผะฟะพััะพะฒ, ะดะธะฐะณะฝะพััะธะบะฐ ะพะบััะถะตะฝะธั
   - ะะฐะฟััะบ: `python test_import_blocker.py`

### ๐ง ะฃะปัััะตะฝะธั ะฒ ัััะตััะฒัััะธั ัะฐะนะปะฐั

**`src/process.py`**
- Wrapper script ัะตะฟะตัั ะฐะบัะธะฒะธััะตั `import_blocker` ะะ ะทะฐะฟััะบะฐ ะพะฑััะฐััะตะณะพ ัะบัะธะฟัะฐ
- ะะพะฑะฐะฒะปะตะฝ pre-flight environment check ะฒ ะฝะฐัะฐะปะพ `start_training()`
- ะฃะปัััะตะฝะฐ ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ั ะฒัะฒะพะดะพะผ traceback
- ะะพะปะตะต ะดะตัะฐะปัะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต ั ัะฐะทะฝัะผะธ ะฟัะตัะธะบัะฐะผะธ `[WRAPPER]`, `[FLUX-TRAIN]`

**`TROUBLESHOOTING.md`**
- ะะพะฒัะน ัะฐะทะดะตะป: "Quick Diagnostics" ั ะบะพะผะฐะฝะดะพะน ะฟัะพะฒะตัะบะธ ะพะบััะถะตะฝะธั
- ะะพะปะฝะพะต ะพะฟะธัะฐะฝะธะต ัะตัะตะฝะธั ะพัะธะฑะบะธ "Python.h not found"
- 3 ะฒะฐัะธะฐะฝัะฐ ัะตัะตะฝะธั: ะฐะฒัะพะผะฐัะธัะตัะบะพะต (ัะตะบะพะผะตะฝะดัะตััั), ะฟะพะปะฝะฐั ัััะฐะฝะพะฒะบะฐ Python, ะฟัะพะฟััะบ quantization
- ะะฑัััะฝะตะฝะธะต ะผะตัะฐะฝะธะบะธ import hooks (ะบะฐะบ ััะพ ัะฐะฑะพัะฐะตั ะทะฐ ะบัะปะธัะฐะผะธ)
- ะัะธะผะตัั ะฒัะฒะพะดะฐ ะดะปั ััะฟะตัะฝะพะน ะธ ะฝะตัะดะฐัะฝะพะน ะดะธะฐะณะฝะพััะธะบะธ

**`README.md`**
- ะะฑะฝะพะฒะปะตะฝั Features: ะดะพะฑะฐะฒะปะตะฝะพ "๐ก๏ธ Embedded Python Protection"
- ะะพะฒัะน ัะฐะทะดะตะป "System Requirements" ั ะฟะพะดะดะตัะถะธะฒะฐะตะผัะผะธ ะฟะปะฐััะพัะผะฐะผะธ
- ะะฐััะธัะตะฝะฐ ัะพะฒะผะตััะธะผะพััั: Windows, embedded Python, full Python

## ๐ก๏ธ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

1. **Wrapper script** ะธะผะฟะพััะธััะตั `import_blocker` **ะฟะตัะฒัะผ ะดะตะปะพะผ**
2. `install_import_blockers()` ะดะพะฑะฐะฒะปัะตั `ProblematicModuleBlocker` ะฒ `sys.meta_path[0]`
3. ะัะฑะฐั ะฟะพะฟััะบะฐ `import triton` ะธะปะธ `import bitsandbytes` ะฒะพะทะฒัะฐัะฐะตั dummy module
4. Training script ะฒัะฟะพะปะฝัะตััั **ะฑะตะท C compilation ะพัะธะฑะพะบ**

## โ ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ

- โ ะะปะพะบะธััะตั `triton`/`bitsandbytes` **ะะ ะบะพะผะฟะธะปััะธะธ** C-ะบะพะดะฐ
- โ ะกะพะทะดะฐะตั dummy modules, ะฟะพััะพะผั ะธะผะฟะพััั ะฝะต ะฟะฐะดะฐัั
- โ ะััะธั `diffusers.quantizers` ะดะปั ะฟัะพะฟััะบะฐ bitsandbytes
- โ ะะฒััััะพะฒะฝะตะฒะฐั ะทะฐัะธัะฐ: env vars + import hooks
- โ ะะฒัะพะผะฐัะธัะตัะบะธะน pre-flight check ะฟะตัะตะด ััะตะฝะธัะพะฒะบะพะน
- โ ะกะพะฒะผะตััะธะผะพ ั embedded Python (portable ComfyUI)
- โ Enterprise ะฟะพะดัะพะด (ะธัะฟะพะปัะทัะตััั ะฒ PyTorch Lightning, HuggingFace Transformers, Ray)

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

```bash
cd ComfyUI-Flux2-LoRA-Manager
python test_import_blocker.py
```

ะะถะธะดะฐะตะผัะน ะฒัะฒะพะด:
```
[TEST 1] Installing import blockers...
โ Import blocker module loaded

[TEST 2] Verifying blockers are active...
โ Blockers verified

[TEST 3] Attempting to import blocked modules...
โ triton import blocked successfully
โ bitsandbytes import blocked successfully

[TEST 4] Running environment check...
โ Environment check PASSED
```

## ๐ ะกัะฐัะธััะธะบะฐ ะธะทะผะตะฝะตะฝะธะน

- **ะะพะฒัะต ัะฐะนะปั**: 3
- **ะะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั**: 3
- **ะกััะพะบ ะบะพะดะฐ ะดะพะฑะฐะฒะปะตะฝะพ**: 604
- **ะกััะพะบ ะบะพะดะฐ ัะดะฐะปะตะฝะพ**: 12
- **Net change**: +592 ัััะพะบ

---

# ๐ ะฃะปัััะตะฝะธั v1.1: ะะตะฑ-ะธะฝัะตััะตะนั ะปะพะณะธัะพะฒะฐะฝะธั ะธ ะธัะฟัะฐะฒะปะตะฝะธั Windows

## โจ ะงัะพ ะธะทะผะตะฝะธะปะพัั

### 1๏ธโฃ ะะพะฑะฐะฒะปะตะฝ ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ ะปะพะณะพะฒ (JavaScript)
**ะคะฐะนะป:** `js/flux_monitor.js` (ะฝะพะฒัะน)

- ๐ข ะะปะฐะฒะฐััะฐั ะฟะฐะฝะตะปั ั ะทะตะปะตะฝัะผ ัะตะบััะพะผ ะฝะฐ ัะตัะฝะพะผ ัะพะฝะต (ะบะปะฐััะธัะตัะบะธะน hacker-ััะธะปั)
- ๐ ะะตะฐะปัะฝะพะต ะฒัะตะผั: ะปะพะณะธ ะฟะพัะฒะปััััั ะฒ ะฑัะฐัะทะตัะต ะฟะพ ะผะตัะต ะฒัะฟะพะปะฝะตะฝะธั
- ๐จ ะฆะฒะตัะฝะพะต ะฒัะดะตะปะตะฝะธะต:
  - ๐ด ะัะฐัะฝัะน: ะพัะธะฑะบะธ, CUDA errors
  - ๐ก ะัะปััะน: warnings
  - ๐ต ะะพะปัะฑะพะน: steps, loss, metrics
  - ๐ ะัะฐะฝะถะตะฒัะน: loading, preparing
  - ๐ข ะะตะปัะฝัะน: success, finished
- ๐ฑ๏ธ Draggable: ะผะพะถะฝะพ ะดะฒะธะณะฐัั ะฟะฐะฝะตะปั ะฟะพ ัะบัะฐะฝั
- โธ๏ธ Click-to-close: ะฝะฐะถะธะผะฐะตะผ ะฝะฐ ะทะฐะณะพะปะพะฒะพะบ ะดะปั ะทะฐะบัััะธั

### 2๏ธโฃ ะะฑะฝะพะฒะปะตะฝั Python ัะฐะนะปั ะดะปั WebSocket ะธะฝัะตะณัะฐัะธะธ

#### `__init__.py` (ะธะทะผะตะฝัะฝ)
```python
WEB_DIRECTORY = "./js"  # โ ะะพะฒะฐั ัััะพะบะฐ
```
ComfyUI ัะตะฟะตัั ะทะฝะฐะตั, ะณะดะต ะธัะบะฐัั JavaScript ัะฐััะธัะตะฝะธั.

#### `src/process.py` (ะธะทะผะตะฝัะฝ)
```python
# ะกัะฐัะพ: ัะพะปัะบะพ print()
print(f"[FLUX-TRAIN] {clean_line}")

# ะะพะฒะพ: print() + WebSocket
print(f"[FLUX-TRAIN] {clean_line}")
PromptServer.instance.send_sync("flux_train_log", {"line": clean_line})
```
ะขะตะฟะตัั ะปะพะณะธ ะพัะฟัะฐะฒะปััััั ะฒ ะฑัะฐัะทะตั ัะตัะตะท WebSocket.

#### `src/config_gen.py` (ะธัะฟัะฐะฒะปะตะฝะพ ะดะปั Windows)
```python
# ะกัะฐัะพ:
cmd = ["accelerate", "launch", ...]  # โ ะะฐ Windows ัะฐััะพ ะฝะต ัะฐะฑะพัะฐะตั

# ะะพะฒะพ:
import sys
python_exe = sys.executable
cmd = [python_exe, "-m", "accelerate.commands.launch", ...]  # โ ะะฐะดัะถะฝะตะต ะฝะฐ Windows
```

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ (ะพะฑะฝะพะฒะปะตะฝะฐ)

```
ComfyUI-Flux2-LoRA-Manager/
โโโ __init__.py                    # โ๏ธ ะะพะฑะฐะฒะปะตะฝ WEB_DIRECTORY
โโโ nodes.py                       # (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)
โโโ requirements.txt               # (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)
โโโ LICENSE                        # (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)
โโโ README.md                      # (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)
โโโ GITHUB_SETUP.md               # (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)
โโโ .gitignore                     # (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)
โ
โโโ js/                           # ๐ ะะะะะฏ ะะะะะ
โ   โโโ flux_monitor.js          # ๐ ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะปะพะณะพะฒ (180 ัััะพะบ)
โ
โโโ src/                          # (ัััะตััะฒัััะธะต ัะฐะนะปั)
    โโโ __init__.py               # (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)
    โโโ config_gen.py             # โ๏ธ Windows fix ะดะปั accelerate
    โโโ process.py                # โ๏ธ WebSocket ะปะพะณะธัะพะฒะฐะฝะธะต
    โโโ utils.py                  # (ะฑะตะท ะธะทะผะตะฝะตะฝะธะน)
```

---

## ๐ฏ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

### ะััะธัะตะบัััะฐ WebSocket

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         WEB BROWSER                         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ ๐ข FLUX.2 Training Monitor (js/flux_monitor.js)     โ  โ
โ  โ [โโโโโโโโโโโโโโโโโโโโ] 45% (Loss: 0.123)             โ  โ
โ  โ [FLUX-TRAIN] Step 450/1200: loss=0.123              โ  โ
โ  โ [FLUX-TRAIN] Saving checkpoint...                    โ  โ
โ  โ                                 (Click to close)      โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ              โ WebSocket: api.addEventListener()           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โโ (bidirectional)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ComfyUI SERVER (Python)                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ PromptServer.send_sync("flux_train_log", {...})     โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ              โ ะัะฟัะฐะฒะบะฐ ะปะพะณะพะฒ ะธะท ะฟะพัะพะบะฐ                     โ
โ                                                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ _log_reader() โ ัะธัะฐะตั stdout ะฟัะพัะตััะฐ             โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ              โ ะงะธัะฐะตั ะธะท subprocess                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                 EXTERNAL PROCESS (subprocess)               โ
โ  python -m accelerate.commands.launch flux_train_network.py โ
โ         โ STDOUT: [kohya_ss training logs]                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะพัะพะบ ะฒัะฟะพะปะฝะตะฝะธั

1. **ะะพะปัะทะพะฒะฐัะตะปั** ะฒ ComfyUI ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะฟะฐัะฐะผะตััั ะธ ะฝะฐะถะธะผะฐะตั "Queue"
2. **ะะพะดะฐ Config** ะณะตะฝะตัะธััะตั ะบะพะผะฐะฝะดั ั python.exe ะฒะผะตััะพ ะฟัะพััะพ "accelerate"
3. **ะะพะดะฐ Runner** ะทะฐะฟััะบะฐะตั ะฟัะพัะตัั ะฒ ะพัะดะตะปัะฝะพะผ ะฟะพัะพะบะต
4. **_log_reader()** ัะธัะฐะตั stdout ะฟะพัััะพัะฝะพ ะธ:
   - ะะตัะฐัะฐะตั ะฒ ะบะพะฝัะพะปั ัะตัะฒะตัะฐ (ัััะฝะพะต ะพะบะฝะพ)
   - ะัะฟัะฐะฒะปัะตั ัะตัะตะท WebSocket ะฒ ะฑัะฐัะทะตั
5. **JavaScript** (flux_monitor.js) ะปะพะฒะธั ัะพะฑััะธะต `flux_train_log` ะธ:
   - ะะพะบะฐะทัะฒะฐะตั ะฟะฐะฝะตะปั (ะตัะปะธ ัะบัััะฐ)
   - ะะพะฑะฐะฒะปัะตั ัััะพะบั ะฒ ะปะพะณ-ะฟะฐะฝะตะปั
   - ะะพะดัะฒะตัะธะฒะฐะตั ัะฒะตัะพะผ
   - ะะฒัะพ-ัะบัะพะปะปะธั ะฒะฝะธะท
6. **ะะพะปัะทะพะฒะฐัะตะปั** ะฒะธะดะธั ะปะพะณะธ **ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ** ะฒ ะฑัะฐัะทะตัะต ๐

---

## ๐ง ะะฐัััะพะนะบะฐ ะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะขัะตะฑะพะฒะฐะฝะธั ะฟะพัะปะต ะพะฑะฝะพะฒะปะตะฝะธั
ะะธะบะฐะบะธั ะฝะพะฒัั ะทะฐะฒะธัะธะผะพััะตะน ะฝะต ะฝัะถะฝะพ! WebSocket - ะฒัััะพะตะฝะฝัะน ะฒ ComfyUI.

```bash
# requirements.txt ะพััะฐัััั ะฑะตะท ะธะทะผะตะฝะตะฝะธะน
pip install -r requirements.txt
```

### ะะตัะตะทะฐะณััะทะบะฐ ComfyUI (ะะะฏะะะขะะะฌะะ!)
```powershell
# 1. ะะฐะบัะพะนัะต ComfyUI (Ctrl+C ะฒ ะบะพะฝัะพะปะธ)
# 2. ะะตัะตะทะฐะฟัััะธัะต ComfyUI
# 3. ะัะบัะพะนัะต ะฑัะฐัะทะตั ะฝะฐ http://localhost:8188
```

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต

1. **ะะพะฑะฐะฒััะต ะฝะพะดั** ะฒ workflow ะพะฑััะฝัะผ ะพะฑัะฐะทะพะผ:
   - ๐๏ธ FLUX.2 Config (Low VRAM)
   - ๐ Start Training (External)

2. **ะะฐะฟะพะปะฝะธัะต ะฟะฐัะฐะผะตััั** ะธ ะฝะฐะถะผะธัะต "Queue Prompt"

3. **ะกะผะพััะธัะต ะปะพะณะธ**:
   - ะ **ะบะพะฝัะพะปะธ ัะตัะฒะตัะฐ** (ัะตัะฝะพะต ะพะบะฝะพ): `[FLUX-TRAIN] Step 1/1200...`
   - ะ **ะฑัะฐัะทะตัะต** (ๅณไธ / bottom-right): ๐ข ะทะตะปัะฝะฐั ะฟะฐะฝะตะปั ั ะปะพะณะฐะผะธ

4. **ะะฐะบัะพะนัะต ะฟะฐะฝะตะปั**: ะบะปะธะบะฝะธัะต ะฝะฐ ะทะฐะณะพะปะพะฒะพะบ "๐ FLUX.2 Training Monitor"

---

## ๐ ะัะฟัะฐะฒะปะตะฝะฝัะต ะพัะธะฑะบะธ

### โ ะัะพะฑะปะตะผะฐ 1: ะะพะณะธ ะฟัะพะฟะฐะดะฐัั ะฒ ะฝะธะบัะดะฐ
**ะัะปะพ:** `print()` ะฟะธัะตั ัะพะปัะบะพ ะฒ ะบะพะฝัะพะปั ัะตัะฒะตัะฐ  
**ะัะฟัะฐะฒะปะตะฝะพ:** WebSocket ะพัะฟัะฐะฒะปัะตั ะปะพะณะธ ะฟััะผะพ ะฒ ะฑัะฐัะทะตั

### โ ะัะพะฑะปะตะผะฐ 2: "accelerate: command not found" ะฝะฐ Windows
**ะัะปะพ:** `cmd = ["accelerate", "launch", ...]`  
**ะัะฟัะฐะฒะปะตะฝะพ:** `cmd = [sys.executable, "-m", "accelerate.commands.launch", ...]`

### โ ะัะพะฑะปะตะผะฐ 3: ะขะธะฟ ะดะฐะฝะฝัั ะฒ ะบะพะผะฐะฝะดะต
**ะัะปะพ:** `"--network_dim", lora_rank` (ะผะพะถะตั ะฑััั int)  
**ะัะฟัะฐะฒะปะตะฝะพ:** `"--network_dim", str(lora_rank)` (ะณะฐัะฐะฝัะธัะพะฒะฐะฝะฝะพ string)

---

## ๐ ะัะธะผะตัั ะปะพะณะพะฒ ะฒ ะฑัะฐัะทะตัะต

```
=== FLUX TRAIN LOG STARTED ===
[FLUX-TRAIN] Loading model: black-forest-labs/FLUX.1-dev
[FLUX-TRAIN] Model loaded successfully (memory: 7.2GB)
[FLUX-TRAIN] Loading dataset from C:/Dataset/img
[FLUX-TRAIN] Found 42 images with captions
[FLUX-TRAIN] Initializing training...
[FLUX-TRAIN] Starting training loop
[FLUX-TRAIN] Step 1/1200: loss=2.543 (lr=0.0001)
[FLUX-TRAIN] Step 2/1200: loss=2.341
[FLUX-TRAIN] Step 3/1200: loss=2.125
...
[FLUX-TRAIN] Saving checkpoint at step 600
[FLUX-TRAIN] LoRA saved to: outputs/my_lora_20250115_143022/lora_model.safetensors
[FLUX-TRAIN] Training finished successfully!

โ TRAINING COMPLETED
```

**ะฆะฒะตัะพะฒะพะต ะฒัะดะตะปะตะฝะธะต:**
- ๐ด `CUDA out of memory` โ ะัะฐัะฝัะน
- ๐ก `WARNING: High gradient norm detected` โ ะัะปััะน
- ๐ต `Step 450/1200: loss=0.234` โ ะะพะปัะฑะพะน
- ๐ข `Training finished successfully` โ ะะตะปัะฝัะน

---

## ๐ Git ะบะพะผะผะธัั

ะะฑะฝะพะฒะปัะฝะฝัะน ะฟัะพะตะบั ะณะพัะพะฒ ะบ ะฟััั:

```bash
git add .
git commit -m "v1.1: Add web UI monitoring, WebSocket logging, Windows fixes

- Add flux_monitor.js: Real-time training logs in browser
- Update process.py: WebSocket integration for live streaming
- Update config_gen.py: Fix accelerate execution on Windows
- Update __init__.py: Register JS extension directory
- Improve error handling and log formatting"

git push origin main
```

---

## โ ะงะตะบ-ะปะธัั ะดะปั ะฟัะพะฒะตัะบะธ

ะะพัะปะต ะพะฑะฝะพะฒะปะตะฝะธั ัะฑะตะดะธัะตัั:

- [ ] ะะฐะฟะบะฐ `js/` ัะพะทะดะฐะฝะฐ ั ัะฐะนะปะพะผ `flux_monitor.js`
- [ ] `__init__.py` ัะพะดะตัะถะธั `WEB_DIRECTORY = "./js"`
- [ ] `src/process.py` ัะพะดะตัะถะธั `PromptServer.instance.send_sync(...)`
- [ ] `src/config_gen.py` ัะพะดะตัะถะธั `sys.executable, "-m", "accelerate.commands.launch"`
- [ ] **ComfyUI ะฟะตัะตะทะฐะณััะถะตะฝ** (ะฒะฐะถะฝะพ!)
- [ ] ะัะธ ะทะฐะฟััะบะต ะฒะธะดะฝะฐ ๐ข ะทะตะปัะฝะฐั ะฟะฐะฝะตะปั ัะฟัะฐะฒะฐ ัะฝะธะทั

---

## ๐ Troubleshooting

### ะะฐะฝะตะปั ะฝะต ะฟะพัะฒะปัะตััั ะฟัะธ ััะตะฝะธัะพะฒะบะต
1. ะัะบัะพะนัะต DevTools ะฑัะฐัะทะตัะฐ (F12 โ Console)
2. ะัะพะฒะตัััะต ะฝะฐะปะธัะธะต ะพัะธะฑะพะบ JavaScript
3. ะฃะฑะตะดะธัะตัั, ััะพ `WEB_DIRECTORY = "./js"` ะฒ `__init__.py`
4. ะะตัะตะทะฐะณััะทะธัะต ComfyUI (Ctrl+Shift+R ะฒ ะฑัะฐัะทะตัะต)

### "AttributeError: 'NoneType' object has no attribute 'send_sync'"
- ะญัะพ ะฝะพัะผะฐะปัะฝะพ, ะตัะปะธ ััะตะฝะธัะพะฒะบะฐ ะทะฐะฟัััะธะปะฐัั ัะตัะตะท CLI ะฑะตะท ะฑัะฐัะทะตัะฐ
- PromptServer.instance ะผะพะถะตั ะฑััั None ะฒ ัะตััะฐั
- ะะพะด ะธะผะตะตั ะพะฑัะฐะฑะพัะบั ะธัะบะปััะตะฝะธะน, ััะตะฝะธัะพะฒะบะฐ ะฟัะพะดะพะปะถะธััั

### ะัะพัะตัั ะฝะต ะทะฐะฟััะบะฐะตััั ะฝะฐ Windows
- ะฃะฑะตะดะธัะตัั, ััะพ `accelerate` ัััะฐะฝะพะฒะปะตะฝ: `pip list | grep accelerate`
- ะัะพะฒะตัััะต ะฟััั ะบ Python: `python -m accelerate.commands.launch --help`
- ะกะผะพััะธัะต ะปะพะณะธ ะฒ ะบะพะฝัะพะปะธ ัะตัะฒะตัะฐ ะดะปั ะดะตัะฐะปะตะน

---

## ๐ ะขะตัะฝะธัะตัะบะพะต ะพะฑัััะฝะตะฝะธะต

### ะะพัะตะผั WebSocket, ะฐ ะฝะต Server-Sent Events (SSE)?
- WebSocket ัะถะต ะฒัััะพะตะฝ ะฒ ComfyUI (ะธัะฟะพะปัะทัะตััั ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั UI โ Backend)
- ะะตะฝััะต overhead ัะตะผ SSE ะดะปั ัะฐัััั ะพะฑะฝะพะฒะปะตะฝะธะน
- Bidirectional (ะผะพะถะฝะพ ะฟะพัะพะผ ะดะพะฑะฐะฒะธัั ัะฟัะฐะฒะปะตะฝะธะต ะธะท ะฑัะฐัะทะตัะฐ)

### ะะพัะตะผั `sys.executable` ะฒะผะตััะพ ะฟัะพััะพ `"accelerate"`?
ะะฐ Windows ะตััั ะฝะตัะบะพะปัะบะพ ะฟะธัะพะฝะพะฒ:
- Python ะธะท conda
- Python ะธะท ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
- Python ะธะท PATH

`sys.executable` ะณะฐัะฐะฝัะธััะตั, ััะพ ะผั ะธัะฟะพะปัะทัะตะผ **ัะพั ะถะต Python**, ะฒ ะบะพัะพัะพะผ ัััะฐะฝะพะฒะปะตะฝะฐ accelerate.

### ะะพัะตะผั ะพัะดะตะปัะฝัะน ะฟะพัะพะบ ะดะปั _log_reader?
- `readline()` โ ะฑะปะพะบะธััััะฐั ะพะฟะตัะฐัะธั
- ะัะปะธ ะฑะปะพะบะธัะพะฒะฐัั ะพัะฝะพะฒะฝะพะน ะฟะพัะพะบ ComfyUI, UI ะทะฐะฒะธัะฝะตั
- ะัะดะตะปัะฝัะน daemon-ะฟะพัะพะบ ะฟะพะทะฒะพะปัะตั ัะธัะฐัั ะปะพะณะธ ะฑะตะท ะฑะปะพะบะธัะพะฒะบะธ

---

**ะะตััะธั:** 1.1  
**ะะฐัะฐ ะพะฑะฝะพะฒะปะตะฝะธั:** 2025-01-15  
**ะกะพะฒะผะตััะธะผะพััั:** ComfyUI stable + dev  
**Python:** 3.10+  
**ะะก:** Windows, Linux, macOS
